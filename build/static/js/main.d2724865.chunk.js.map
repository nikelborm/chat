{"version":3,"sources":["components/Participant.js","components/ParticipantsList.js","components/getCookie.js","components/MyAccountInfo.js","components/ConversationList.js","components/Message.js","components/MessagesList.js","components/ChatArea.js","components/TabsContainer.js","components/RightTabs.js","components/WindowArea.js","components/WindowTitle.js","components/App.js","index.js"],"names":["Participant","props","data","userName","fullName","onlineStatus","href","className","title","ParticipantsList","usersList","listOfParticipants","userId","hasOwnProperty","push","key","length","getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","MyAccountInfo","state","imgIsLoading","imgLink","componentDidMount","fetch","then","response","json","setState","results","picture","large","statusText","src","this","alt","id","style","overflow","Component","ConversationList","Message","author","text","time","myName","MessagesList","chatList","createRef","down","current","scrollTo","offsetTop","info","msgList","isLoading","ref","overflowX","overflowY","map","item","_id","ChatArea","sendMsgInChat","e","preventDefault","room","message","inputArea","value","location","origin","method","body","JSON","stringify","headers","Headers","console","log","React","type","defaultValue","onClick","TabsContainer","RightTabs","WindowArea","usersInGlobalRoom","ischatHistoryLoaded","isUsersListInRoomDownloaded","loader","path","pasteReplyIn","pasteSuccessIn","reply","report","isError","componentDidUpdate","cometCreated","protocol","socket","WebSocket","host","onopen","onmessage","event","parse","handlerType","concat","prevState","onclose","onerror","error","WindowTitle","App","render","getElementById"],"mappings":"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","file":"static/js/main.d2724865.chunk.js","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\r\nimport React from 'react';\r\nfunction Participant(props) {\r\n    const { userName, fullName, onlineStatus } = props.data;\r\n    return (<li>\r\n        <a href=\"#\">\r\n            <i className={\"fa fa-circle-o \" + onlineStatus} title={userName}></i>\r\n            <span>{fullName}</span>\r\n            <i className=\"fa fa-times\"></i>\r\n        </a>\r\n    </li>);\r\n}\r\nexport default Participant;\r\n","/* eslint-disable jsx-a11y/anchor-is-valid */\r\nimport React from 'react';\r\nimport Participant from './Participant';\r\nfunction ParticipantsList(props) {\r\n    const { usersList } = props;\r\n    let listOfParticipants = [];\r\n    for (const userId in usersList) {\r\n        if (usersList.hasOwnProperty(userId)) {\r\n            listOfParticipants.push(<Participant key={userId} data={usersList[userId]} />)\r\n        }\r\n    }\r\n    return (\r\n        <ul>\r\n            <li className=\"item\"><a href=\"#\"><i className=\"fa fa-list-alt\"></i><span>Участники</span></a></li>\r\n            {/* <li className=\"item active\"><a href=\"#\"><i className=\"fa fa-user\"></i><span>Команда чата</span><i className=\"fa fa-times\"></i></a></li> */}\r\n            <ul>\r\n                {listOfParticipants}\r\n            </ul>\r\n            {!listOfParticipants.length && <strong>Загружается список участников комнаты...</strong>}\r\n        </ul>\r\n    );\r\n}\r\nexport default ParticipantsList;\r\n","/* eslint-disable no-useless-escape */\r\n// возвращает куки с указанным name,\r\n// или undefined, если ничего не найдено\r\nfunction getCookie(name) {\r\n    let matches = document.cookie.match(new RegExp(\"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"));\r\n    return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\nexport default getCookie;","/* eslint-disable no-useless-concat */\r\nimport React, { Component } from 'react';\r\nimport getCookie from './getCookie';\r\nclass MyAccountInfo extends Component {\r\n    state = {\r\n        imgIsLoading: true,\r\n        imgLink: \"\"\r\n    }\r\n    componentDidMount = () => {\r\n        fetch('https://randomuser.me/api/?results=1&inc=picture&noinfo')\r\n            .then(function (response) {\r\n                return response.json()\r\n            }).then((data) => {\r\n                this.setState({\r\n                    imgLink: data.results[0].picture.large,\r\n                    imgIsLoading: false\r\n                })\r\n            });\r\n    };\r\n    render() {\r\n        const userName = getCookie(\"userName\");\r\n        const fullName = getCookie(\"fullName\");\r\n        const statusText = getCookie(\"statusText\");\r\n        return (\r\n            <div className=\"my-account\">\r\n                <div className=\"image\">\r\n                    <img src={this.state.imgIsLoading ? \"chat/white.jpg\" : this.state.imgLink} title=\"Аватар выбирается случайно\" alt=\"User\"/>\r\n                    <i className={\"fa fa-circle \" + \"online\"}></i>\r\n                    {/* TODO: Сделать чтобы можно выбрать свой онлайн и он ставился после задержки: offline, online, idle */}\r\n                </div>\r\n                <div className=\"name\">\r\n                    <span id=\"myName\" style={{overflow:\"hidden\"}} title={userName}>\r\n                    {fullName}\r\n                    </span>\r\n                    <i className=\"fa fa-angle-down\"></i>\r\n                    <span className=\"availability\">{statusText}</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default MyAccountInfo;\r\n","import React from 'react';\nimport ParticipantsList from './ParticipantsList';\nimport MyAccountInfo from './MyAccountInfo';\nfunction ConversationList(props) {\n    const { usersList } = props;\n    return (\n        <div className=\"conversation-list\">\n            <ParticipantsList usersList={usersList} />\n            <MyAccountInfo />\n        </div>\n    );\n}\nexport default ConversationList;\n","import React from 'react';\r\nimport getCookie from './getCookie';\r\nfunction Message(props) {\r\n    const { author, text, time } = props.data;\r\n    const myName = getCookie(\"userName\");\r\n    return (\r\n        <li className={(author === myName) ? 'me' : ''}>\r\n            <div className=\"name\">\r\n                <span className=\"\">\r\n                    {author}\r\n                </span>\r\n            </div>\r\n            <div className=\"message\">\r\n                <p>\r\n                    {text.replace(/@(\\w{1,50})/g, '<a href=\"domain.com/$1\">$&</a>').replace(/#[\\wА-Яа-яЁё]{1,50}/g, '<a href=\"#\" class=\"hashtag\">$&</a>')}\r\n                    {/* TODO: Заставить эту хрень работать как положено */}\r\n                </p>\r\n                <span className=\"msg-time\">\r\n                    {/* TODO: организовать работу со временем */}\r\n                    {time}\r\n                </span>\r\n            </div>\r\n        </li>\r\n    );\r\n}\r\nexport default Message;\r\n","import React, { Component, createRef } from 'react';\nimport Message from './Message';\nclass MessagesList extends Component {\n    constructor(props) {\n        super(props);\n        this.chatList = createRef();\n        this.down = createRef();\n    }\n    componentDidUpdate() {\n        this.chatList.current.scrollTo(0, this.down.current.offsetTop);\n    }\n    render() {\n        const { msgList, isLoading } = this.props;\n        let info;\n        if (isLoading) {\n            info = (<strong>Сообщения загружаются, пожалуйста подождите</strong>)\n        } else if ( !msgList.length ){\n            info = (<strong>Сообщений пока нет, но вы можете это исправить!</strong>)\n        }\n        return (\n            <div className=\"chat-list\" ref={this.chatList} style={{overflowX: \"hidden\", overflowY: \"scroll\"}}>\n                <ul>\n                    {msgList.map((item) => <Message key={item._id} data={item} />)}\n                </ul>\n                {info}\n                <span ref={this.down}></span>\n            </div>\n        );\n    }\n}\nexport default MessagesList;\n","import React, { Component } from 'react';\nimport MessagesList from \"./MessagesList\";\nclass ChatArea extends Component {\n    constructor(props) {\n        super(props);\n        this.inputArea = React.createRef();\n    }\n    sendMsgInChat = (e) => {\n        e.preventDefault();\n        const data = {\n            room: \"global\",\n            message: this.inputArea.current.value\n        };\n        fetch(document.location.origin + '/sendMsgInChat', {\n            method: 'post',\n            body: JSON.stringify(data),\n            headers: new Headers({\n                'Content-Type': 'application/json'\n            })\n        }).then((response) => {\n            return response.json();\n        }).then((data) => {\n            console.log(data);\n        });\n    };\n    render() {\n        const { msgList, isLoading } = this.props;\n        return (\n            <div className=\"chat-area\">\n                <div className=\"title\">\n                    <b> Переписка </b>\n                    <i className=\"fa fa-search\"></i>\n                </div>\n                <MessagesList msgList={msgList} isLoading={isLoading} />\n                <form className=\"input-area\">\n                    <div className=\"input-wrapper\">\n                        <input type=\"text\" defaultValue=\"\" ref={this.inputArea}/>\n                        <i className=\"fa fa-smile-o\"></i>\n                        <i className=\"fa fa-paperclip\"></i>\n                    </div>\n                    <button onClick={this.sendMsgInChat} className=\"send-btn\">{\">\"}</button>\n                </form>\n            </div>\n        );\n    }\n}\nexport default ChatArea;\n","import React from 'react';\r\nfunction TabsContainer() {\r\n    // TODO: добавить подгрузку онлайновых и работу с вкладками\r\n    return (\r\n        <ul className=\"tabs-container\">\r\n            <li className=\"active\">\r\n                <ul className=\"member-list\">\r\n                    <li><span className=\"status online\"><i className=\"fa fa-circle-o\"></i></span><span>Kristi Galeeva</span></li>\r\n                    <li><span className=\"status online\"><i className=\"fa fa-circle-o\"></i></span><span>Segey Bondar</span></li>\r\n                    <li><span className=\"status idle\"><i className=\"fa fa-circle-o\"></i></span><span>Gleb Kavrasky</span><span className=\"time\">10:45 pm</span></li>\r\n                    <li><span className=\"status offline\"><i className=\"fa fa-circle-o\"></i></span><span>David Barto</span></li>\r\n                </ul>\r\n            </li>\r\n            <li></li>\r\n            <li></li>\r\n        </ul>\r\n    );\r\n\r\n}\r\nexport default TabsContainer;\r\n","/* eslint-disable jsx-a11y/anchor-is-valid */\r\nimport React from 'react';\r\nimport TabsContainer from \"./TabsContainer\";\r\n// TODO: Сделать нормальные рабочие вкладки и пункты меню\r\nfunction RightTabs() {\r\n    return (\r\n        <div className=\"right-tabs\">\r\n            <ul className=\"tabs\">\r\n                <li className=\"active\">\r\n                    <a href=\"#\"><i className=\"fa fa-users\"></i></a>\r\n                </li>\r\n                <li><a href=\"#\"><i className=\"fa fa-paperclip\"></i></a></li>\r\n                <li><a href=\"#\"><i className=\"fa fa-link\"></i></a></li>\r\n            </ul>\r\n            <TabsContainer />\r\n            <i className=\"fa fa-cog\"></i>\r\n        </div>\r\n    );\r\n}\r\nexport default RightTabs;\r\n","import React, { Component } from 'react';\nimport ConversationList from \"./ConversationList\";\nimport ChatArea from \"./ChatArea\";\nimport RightTabs from \"./RightTabs\";\nclass WindowArea extends Component {\n    constructor(props) {\n        super(props);\n        this.cometCreated = false;\n    }\n    state = {\n        msgList: [],\n        usersInGlobalRoom: {},\n        ischatHistoryLoaded: false,\n        isUsersListInRoomDownloaded: false\n    };\n    componentDidMount = () => {\n        this.loader(\"/loadChatHistory\", \"msgList\", \"ischatHistoryLoaded\");\n        this.loader(\"/loadListOfUsersInChat\", \"usersInGlobalRoom\", \"isUsersListInRoomDownloaded\");\n    };\n    loader = (path, pasteReplyIn, pasteSuccessIn) => {\n        fetch(document.location.origin + path, {\n            method: 'post',\n            body: JSON.stringify({ room: \"global\" }),\n            headers: new Headers({\n                'Content-Type': 'application/json'\n            })\n        }).then((response) => {\n            return response.json()\n        }).then((data) => {\n            console.log(data)\n            const {reply, report} = data;\n            if (!report.isError) {\n                this.setState({\n                    [pasteReplyIn]: reply,\n                    [pasteSuccessIn]: true\n                });\n            }\n        });\n    };\n    componentDidUpdate = () => {\n        if (this.state.ischatHistoryLoaded && this.state.isUsersListInRoomDownloaded && !this.cometCreated) {\n            const protocol = document.location.protocol[4] === \"s\" ? \"wss://\": \"ws://\"\n            let socket = new WebSocket(protocol + document.location.host);\n            socket.onopen = function (e) {\n                console.log(\"[open] Соединение установлено\");\n            };\n            socket.onmessage = (event) => {\n                console.log(\"[message] Данные получены с сервера:\");\n                const data = JSON.parse(event.data);\n                console.log(\"Отчёт:\")\n                console.log(event)\n                console.log(data)\n                if (data.handlerType === \"message\") {\n                    this.setState({\n                        msgList: this.state.msgList.concat(data.message)\n                    });\n                } else if (data.handlerType === \"isOnline\") {\n                    this.setState((prevState) => {\n                        prevState.usersInGlobalRoom[data._id].onlineStatus = \"online\";\n                        return prevState;\n                    });\n                } else if (data.handlerType === \"isOffline\") {\n                    this.setState((prevState) => {\n                        prevState.usersInGlobalRoom[data._id].onlineStatus = \"offline\";\n                        return prevState;\n                    });\n                }\n            };\n            socket.onclose = function (event) {\n                console.log(\"[close] Соединение закрыто. Отчёт:\");\n                console.log(event);\n            };\n            socket.onerror = function (error) {\n                console.error(\"[error] Ошибка! Отчёт:\");\n                console.log(error);\n            };\n            this.cometCreated = true;\n        }\n    };\n    render() {\n        const {msgList, ischatHistoryLoaded, usersInGlobalRoom} = this.state;\n        return (\n            <div className=\"window-area\">\n                <ConversationList usersList={usersInGlobalRoom}/>\n                <ChatArea msgList={msgList} isLoading={!ischatHistoryLoaded}/>\n                <RightTabs />\n            </div>\n        );\n    }\n}\nexport default WindowArea;\n","import React from 'react';\r\nfunction WindowTitle() {\r\n    return (\r\n        <div className=\"window-title\">\r\n            <div className=\"dots\">\r\n                <i className=\"fa fa-circle\"></i>\r\n                <i className=\"fa fa-circle\"></i>\r\n                <i className=\"fa fa-circle\"></i>\r\n            </div>\r\n            <div className=\"title\">\r\n                <span>Чат</span>\r\n            </div>\r\n            <div className=\"expand\">\r\n                <i className=\"fa fa-expand\"></i>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default WindowTitle;\r\n","import React, { Fragment } from 'react';\r\nimport WindowArea from \"./WindowArea\";\r\nimport WindowTitle from \"./WindowTitle\";\r\nfunction App() {\r\n    return (\r\n        <Fragment>\r\n            <WindowTitle />\r\n            <WindowArea />\r\n        </Fragment>\r\n    );\r\n}\r\nexport default App;\r\n","import React from 'react';\r\nimport {render} from 'react-dom';\r\nimport App from './components/App.js';\r\n\r\nrender(\r\n    <App />,\r\n    document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}