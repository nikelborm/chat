(this.webpackJsonpnews=this.webpackJsonpnews||[]).push([[0],{14:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(8),s=t(1),r=t(2),i=t(4),m=t(3),o=t(5);var u=function(e){var a=e.data,t=a.userName,n=a.onlineStatus;return l.a.createElement("li",null,l.a.createElement("a",{href:"#"},l.a.createElement("i",{className:"fa fa-circle-o "+n}),l.a.createElement("span",null,t),l.a.createElement("i",{className:"fa fa-times"})))};var f=function(e){var a=e.listOfUsers;return l.a.createElement("ul",null,l.a.createElement("li",{className:"item"},l.a.createElement("a",{href:"#"},l.a.createElement("i",{className:"fa fa-list-alt"}),l.a.createElement("span",null,"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438"))),l.a.createElement("li",{className:"item active"},l.a.createElement("a",{href:"#"},l.a.createElement("i",{className:"fa fa-user"}),l.a.createElement("span",null,"\u041a\u043e\u043c\u0430\u043d\u0434\u0430 \u0447\u0430\u0442\u0430"),l.a.createElement("i",{className:"fa fa-times"}))),l.a.createElement("ul",null,a&&a.map((function(e){return l.a.createElement(u,{key:e.id,data:e})}))),!a.length&&l.a.createElement("strong",null,"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u043d\u0435\u0442! (\u043e\u0447\u0435\u043d\u044c \u0441\u0442\u0440\u0430\u043d\u043d\u043e)"))};var E=function(e){var a=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return a?decodeURIComponent(a[1]):void 0},d=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).state={imgIsLoading:!0,imgLink:""},t.componentDidMount=function(){fetch("https://randomuser.me/api/?results=1&inc=picture&noinfo").then((function(e){return e.json()})).then((function(e){t.setState({imgLink:e.results[0].picture.large,imgIsLoading:!1})}))},t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=E("userName"),a=E("fullName"),t=E("statusText");return l.a.createElement("div",{className:"my-account"},l.a.createElement("div",{className:"image"},l.a.createElement("img",{src:this.state.imgIsLoading?"chat/white.jpg":this.state.imgLink,title:"\u0410\u0432\u0430\u0442\u0430\u0440 \u0432\u044b\u0431\u0438\u0440\u0430\u0435\u0442\u0441\u044f \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e",alt:"User"}),l.a.createElement("i",{className:"fa fa-circle online"})),l.a.createElement("div",{className:"name"},l.a.createElement("span",{id:"myName"},a," (",e,")"),l.a.createElement("i",{className:"fa fa-angle-down"}),l.a.createElement("span",{className:"availability"},t)))}}]),a}(n.Component);var p=function(e){var a=e.listOfUsers;return l.a.createElement("div",{className:"conversation-list"},l.a.createElement(f,{listOfUsers:a}),l.a.createElement(d,null))},h=t(6);var g=function(e){var a=e.data,t=a.author,n=a.text,c=a.time,s=E("userName");return l.a.createElement("li",{className:t===s?"me":""},l.a.createElement("div",{className:"name"},l.a.createElement("span",{className:""},t)),l.a.createElement("div",{className:"message"},l.a.createElement("p",null,n.replace(/@(\w{1,50})/g,'<a href="domain.com/$1">$&</a>').replace(/#[\w\u0410-\u042f\u0430-\u044f\u0401\u0451]{1,50}/g,'<a href="#" class="hashtag">$&</a>')),l.a.createElement("span",{className:"msg-time"},c)))},N=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).chatList=Object(n.createRef)(),t.down=Object(n.createRef)(),t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"componentDidUpdate",value:function(){this.chatList.current.scrollTo(0,this.down.current.offsetTop)}},{key:"render",value:function(){var e,a=this.props,t=a.msgList;return a.isLoading?e=l.a.createElement("strong",null,"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"):t.length||(e=l.a.createElement("strong",null,"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442, \u043d\u043e \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u044d\u0442\u043e \u0438\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c!")),l.a.createElement("div",{className:"chat-list",ref:this.chatList,style:{overflowX:"hidden",overflowY:"scroll"}},l.a.createElement("ul",null,t.map((function(e){return l.a.createElement(g,{key:e._id,data:e})}))),e,l.a.createElement("span",{ref:this.down}))}}]),a}(n.Component),v=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).state={msgList:[],isLoading:!0},t.componentDidMount=function(){fetch(document.location.origin+"/loadChatHistory",{method:"post",body:JSON.stringify({room:"global"}),headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){console.log(e);var a=e.reply;e.report.isError||0===a.length||(t.setState({msgList:a,isLoading:!1}),t.props.chatHistoryIsLoaded(Object(h.a)(t)))}))},t.sendMsgInChat=function(e){e.preventDefault();var a={room:"global",message:t.inputArea.current.value};fetch(document.location.origin+"/sendMsgInChat",{method:"post",body:JSON.stringify(a),headers:new Headers({"Content-Type":"application/json"})}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},t.inputArea=l.a.createRef(),t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){var e=this.state,a=e.msgList,t=e.isLoading;return l.a.createElement("div",{className:"chat-area"},l.a.createElement("div",{className:"title"},l.a.createElement("b",null," \u041f\u0435\u0440\u0435\u043f\u0438\u0441\u043a\u0430 "),l.a.createElement("i",{className:"fa fa-search"})),l.a.createElement(N,{msgList:a,isLoading:t}),l.a.createElement("form",{className:"input-area"},l.a.createElement("div",{className:"input-wrapper"},l.a.createElement("input",{type:"text",defaultValue:"",ref:this.inputArea}),l.a.createElement("i",{className:"fa fa-smile-o"}),l.a.createElement("i",{className:"fa fa-paperclip"})),l.a.createElement("button",{onClick:this.sendMsgInChat,className:"send-btn"},">")))}}]),a}(n.Component);var b=function(){return l.a.createElement("ul",{className:"tabs-container"},l.a.createElement("li",{className:"active"},l.a.createElement("ul",{className:"member-list"},l.a.createElement("li",null,l.a.createElement("span",{className:"status online"},l.a.createElement("i",{className:"fa fa-circle-o"})),l.a.createElement("span",null,"Kristi Galeeva")),l.a.createElement("li",null,l.a.createElement("span",{className:"status online"},l.a.createElement("i",{className:"fa fa-circle-o"})),l.a.createElement("span",null,"Segey Bondar")),l.a.createElement("li",null,l.a.createElement("span",{className:"status idle"},l.a.createElement("i",{className:"fa fa-circle-o"})),l.a.createElement("span",null,"Gleb Kavrasky"),l.a.createElement("span",{className:"time"},"10:45 pm")),l.a.createElement("li",null,l.a.createElement("span",{className:"status offline"},l.a.createElement("i",{className:"fa fa-circle-o"})),l.a.createElement("span",null,"David Barto")))),l.a.createElement("li",null),l.a.createElement("li",null))};var y=function(){return l.a.createElement("div",{className:"right-tabs"},l.a.createElement("ul",{className:"tabs"},l.a.createElement("li",{className:"active"},l.a.createElement("a",{href:"#"},l.a.createElement("i",{className:"fa fa-users"}))),l.a.createElement("li",null,l.a.createElement("a",{href:"#"},l.a.createElement("i",{className:"fa fa-paperclip"}))),l.a.createElement("li",null,l.a.createElement("a",{href:"#"},l.a.createElement("i",{className:"fa fa-link"})))),l.a.createElement(b,null),l.a.createElement("i",{className:"fa fa-cog"}))},O=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(t=Object(i.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(l)))).chatHistoryIsLoaded=function(e){var a=new WebSocket("wss://"+document.location.host);a.onopen=function(e){console.log("[open] \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e")},a.onmessage=function(a){console.log("[message] \u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ".concat(a.data));var t=JSON.parse(a.data);e.setState({msgList:e.state.msgList.concat(t.message)})},a.onclose=function(e){e.wasClean?console.log("[close] \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u043e \u0447\u0438\u0441\u0442\u043e, \u043a\u043e\u0434=".concat(e.code," \u043f\u0440\u0438\u0447\u0438\u043d\u0430=").concat(e.reason)):console.log("[close] \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0440\u0432\u0430\u043d\u043e")},a.onerror=function(e){console.log("[error] ".concat(e.message))}},t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"window-area"},l.a.createElement(p,{listOfUsers:[{userName:"\u0414\u0430\u0432\u0438\u0434 \u0411\u0430\u0440\u0442\u043e",onlineStatus:"online"},{userName:"\u0421\u0435\u0440\u0433\u0435\u0439 \u0411\u043e\u043d\u0434\u0430\u0440\u044c",onlineStatus:"idle"},{userName:"\u0413\u043b\u0435\u0431 \u041a\u0430\u0432\u0440\u0430\u0441\u043a\u0438\u0439",onlineStatus:"offline"}]}),l.a.createElement(v,{chatHistoryIsLoaded:this.chatHistoryIsLoaded}),l.a.createElement(y,null))}}]),a}(n.Component);var j=function(){return l.a.createElement("div",{className:"window-title"},l.a.createElement("div",{className:"dots"},l.a.createElement("i",{className:"fa fa-circle"}),l.a.createElement("i",{className:"fa fa-circle"}),l.a.createElement("i",{className:"fa fa-circle"})),l.a.createElement("div",{className:"title"},l.a.createElement("span",null,"\u0427\u0430\u0442")),l.a.createElement("div",{className:"expand"},l.a.createElement("i",{className:"fa fa-expand"})))};var w=function(){return l.a.createElement(n.Fragment,null,l.a.createElement(j,null),l.a.createElement(O,null))};Object(c.render)(l.a.createElement(w,null),document.getElementById("root"))},9:function(e,a,t){e.exports=t(14)}},[[9,1,2]]]);
//# sourceMappingURL=main.8ac57831.chunk.js.map